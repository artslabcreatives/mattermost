# Uppy Companion — environment configuration
# Copy this file to .env and fill in the values.
# Never commit the .env file with real credentials.

# ── Companion service ──────────────────────────────────────────────────────
# Secret used to sign Companion cookies and access tokens.
COMPANION_SECRET=replace-with-a-long-random-secret

# Comma-separated list of allowed origins for CORS (no wildcards in prod).
# Example: https://chat.example.com,https://www.example.com
COMPANION_CLIENT_ORIGINS=https://YOUR_MATTERMOST_DOMAIN

# ── DigitalOcean Spaces / S3 ───────────────────────────────────────────────
COMPANION_AWS_KEY=your_spaces_access_key_id
COMPANION_AWS_SECRET=your_spaces_secret_access_key

# Bucket name (must already exist).
COMPANION_AWS_BUCKET=your-bucket-name

# Region, e.g. nyc3, ams3, sfo3.
COMPANION_AWS_REGION=nyc3

# Custom endpoint for DO Spaces (or any S3-compatible store).
# For DigitalOcean Spaces use: https://<region>.digitaloceanspaces.com
COMPANION_AWS_ENDPOINT=https://nyc3.digitaloceanspaces.com

# ── Upload allowlist ───────────────────────────────────────────────────────
# Strictly restrict Companion so it can only upload to your Spaces bucket.
# Must be a comma-separated list of URL prefixes.
COMPANION_UPLOAD_URLS=https://your-bucket-name.nyc3.digitaloceanspaces.com

# ── Optional: Redis session store ─────────────────────────────────────────
# Required for running multiple Companion instances (horizontal scaling).
# COMPANION_REDIS_URL=redis://redis:6379

# ── OAuth providers ───────────────────────────────────────────────────────
# Google Drive
# COMPANION_GOOGLE_KEY=your_google_oauth2_client_id
# COMPANION_GOOGLE_SECRET=your_google_oauth2_client_secret

# Dropbox
# COMPANION_DROPBOX_KEY=your_dropbox_app_key
# COMPANION_DROPBOX_SECRET=your_dropbox_app_secret

# OneDrive
# COMPANION_ONEDRIVE_KEY=your_onedrive_client_id
# COMPANION_ONEDRIVE_SECRET=your_onedrive_client_secret

# ── Debug ─────────────────────────────────────────────────────────────────
# Set to "companion*" to enable verbose Companion debug logging.
# DEBUG=companion*
